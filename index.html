<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GoldCrypto</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Tajawal', sans-serif; }
    .gradient-bg { background: linear-gradient(135deg, #1a1a1a, #3a2c0f, #d4af37); }
  </style>
</head>
<body class="bg-gray-900 text-white p-5">

  <h1 class="text-4xl font-bold text-center mb-8 text-yellow-400">âœ¨ Ù‚Ø³Ù… GoldCrypto âœ¨</h1>

  <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª -->
  <div class="overflow-x-auto mb-5">
    <table class="w-full bg-gray-800 shadow-lg rounded-lg overflow-hidden">
      <thead class="bg-yellow-500 text-black">
        <tr>
          <th class="p-3">Ø§Ù„Ø¹Ù…Ù„Ø©</th>
          <th class="p-3">Ø§Ù„Ø³Ø¹Ø± (ØºÙˆÙ„Ø¯)</th>
          <th class="p-3">Ø§Ù„Ø­Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ</th>
        </tr>
      </thead>
      <tbody id="cryptoTable" class="text-center"></tbody>
    </table>
  </div>

  <!-- Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø·Ù„Ø¨ -->
  <div class="bg-gray-800 shadow-lg rounded-lg p-5 mb-5">
    <h2 class="text-2xl font-bold mb-3 text-yellow-300">ØªÙ†ÙÙŠØ° Ø¹Ù…Ù„ÙŠØ©</h2>
    <form id="tradeForm" class="grid grid-cols-1 md:grid-cols-5 gap-3">
      <select id="coin" class="p-2 border rounded bg-gray-700 text-white">
        <option value="BTC">Bitcoin (BTC)</option>
        <option value="DASH">DASH</option>
        <option value="USDT">Tether (USDT)</option>
        <option value="XMR">Monero (XMR)</option>
        <option value="NANO">Nano (NANO)</option>
        <option value="LTC">Litecoin (LTC)</option>
      </select>

      <select id="type" class="p-2 border rounded bg-gray-700 text-white">
        <option value="buy">Ø´Ø±Ø§Ø¡</option>
        <option value="sell">Ø¨ÙŠØ¹</option>
      </select>

      <input type="number" id="amount" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©" min="1" class="p-2 border rounded bg-gray-700 text-white">

      <input type="text" id="code" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" class="p-2 border rounded bg-gray-700 text-white">

      <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition">
        ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
      </button>
    </form>
  </div>

  <!-- Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª -->
  <div class="bg-gray-800 shadow-lg rounded-lg p-5 mb-5">
    <h2 class="text-2xl font-bold mb-3 text-yellow-300">Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h2>
    <ul id="log" class="space-y-2 text-gray-300"></ul>
  </div>

  <!-- Ø²Ø± Ø§Ù„ØªÙ‚Ø±ÙŠØ± -->
  <div class="text-center mb-10">
    <button onclick="openReport()" class="bg-blue-500 text-white px-6 py-3 rounded text-xl hover:bg-blue-600 transition">
      ğŸ“ Ø·Ù„Ø¨ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ
    </button>
  </div>

  <script>
    let coins = {
      BTC: { name: "Bitcoin (BTC)", price: 1000, dailyLimit: 1, k: 0.02 },
      DASH: { name: "DASH", price: 250, dailyLimit: 3, k: 0.015 },
      USDT: { name: "Tether (USDT)", price: 100, dailyLimit: 5, k: 0.01 },
      XMR: { name: "Monero (XMR)", price: 600, dailyLimit: 1, k: 0.02 },
      NANO: { name: "Nano (NANO)", price: 120, dailyLimit: 10, k: 0.005 },
      LTC: { name: "Litecoin (LTC)", price: 300, dailyLimit: 2, k: 0.015 },
    };

    let log = [];
    let userDailyOps = {};

    function updateTable() {
      let table = document.getElementById("cryptoTable");
      table.innerHTML = "";
      for (let key in coins) {
        table.innerHTML += `
          <tr class="border-b border-gray-700 hover:bg-gray-700 transition">
            <td class="p-2">${coins[key].name}</td>
            <td class="p-2">${coins[key].price.toFixed(2)}</td>
            <td class="p-2">${coins[key].dailyLimit} / ÙŠÙˆÙ…</td>
          </tr>
        `;
      }
    }

    function updateLog() {
      let logList = document.getElementById("log");
      logList.innerHTML = log.map(entry => `
        <li class="border-b border-gray-700 p-2 flex justify-between items-center">
          ${entry.text}
          <button onclick="copyToClipboard('${entry.text}')" class="bg-yellow-500 text-black px-2 py-1 rounded hover:bg-yellow-600">Ù†Ø³Ø®</button>
        </li>
      `).join("");
    }

    function copyToClipboard(text) {
      navigator.clipboard.writeText(text);
      alert("ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ âœ…");
    }

    document.getElementById("tradeForm").addEventListener("submit", function(e) {
      e.preventDefault();
      let coinKey = document.getElementById("coin").value;
      let type = document.getElementById("type").value;
      let amount = parseFloat(document.getElementById("amount").value);
      let code = document.getElementById("code").value.trim();

      if (!code) return alert("Ø£Ø¯Ø®Ù„ ÙƒÙˆØ¯ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…!");
      if (amount <= 0 || isNaN(amount)) return alert("Ø£Ø¯Ø®Ù„ ÙƒÙ…ÙŠØ© ØµØ­ÙŠØ­Ø©!");

      if (!userDailyOps[code]) userDailyOps[code] = {};
      if (!userDailyOps[code][coinKey]) userDailyOps[code][coinKey] = 0;

      if (userDailyOps[code][coinKey] + amount > coins[coinKey].dailyLimit) {
        return alert("âŒ ØªØ¬Ø§ÙˆØ²Øª Ø§Ù„Ø­Ø¯ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„Ø©!");
      }

      let oldPrice = coins[coinKey].price;
      let effect = type === "buy" ? amount : -amount;
      coins[coinKey].price = oldPrice * (1 + coins[coinKey].k * effect);

      userDailyOps[code][coinKey] += amount;

      let actionText = type === "buy" ? "Ø´Ø±Ø§Ø¡" : "Ø¨ÙŠØ¹";
      let logEntry = {
        text: `${actionText} ${amount} ${coins[coinKey].name} Ø¨Ø³Ø¹Ø± ${oldPrice.toFixed(2)} ØºÙˆÙ„Ø¯ (ÙƒÙˆØ¯: ${code})`,
        type,
        amount,
        coin: coinKey,
        value: amount * oldPrice
      };
      log.unshift(logEntry);

      updateTable();
      updateLog();
      document.getElementById("tradeForm").reset();
    });

    function openReport() {
      let totalBuy = 0, totalSell = 0;
      log.forEach(l => {
        if (l.type === "buy") totalBuy += l.value;
        else totalSell += l.value;
      });

      let today = new Date().toLocaleDateString('ar-EG');
      let buyLogs = log.filter(l=>l.type==='buy').map(l=>`<li>ğŸŸ¢ ${l.text}</li>`).join("") || "<li>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø´Ø±Ø§Ø¡</li>";
      let sellLogs = log.filter(l=>l.type==='sell').map(l=>`<li>ğŸ”´ ${l.text}</li>`).join("") || "<li>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø¨ÙŠØ¹</li>";

      let reportHTML = `
        <html lang="ar" dir="rtl">
        <head>
          <meta charset="UTF-8">
          <title>ØªÙ‚Ø±ÙŠØ± GoldCrypto</title>
          <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
        </head>
        <body class="gradient-bg text-white min-h-screen flex justify-center items-center p-5">
          <div class="bg-black bg-opacity-70 border-4 border-yellow-500 rounded-2xl shadow-2xl p-8 w-full max-w-3xl">
            <h1 class="text-3xl text-yellow-400 font-bold text-center mb-6">ğŸ“œ ØªÙ‚Ø±ÙŠØ± GoldCrypto Ø§Ù„ÙŠÙˆÙ…ÙŠ</h1>
            <p class="text-center text-gray-300 mb-4">ğŸ—“ï¸ ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ…: ${today}</p>

            <h2 class="text-2xl text-green-400 mb-3">ğŸ’  Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø´Ø±Ø§Ø¡</h2>
            <ul class="mb-5 space-y-1 text-gray-200">${buyLogs}</ul>
            <p class="text-green-400 font-bold mb-6">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${totalBuy.toFixed(2)} G</p>

            <h2 class="text-2xl text-red-400 mb-3">ğŸ’  Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¨ÙŠØ¹</h2>
            <ul class="mb-5 space-y-1 text-gray-200">${sellLogs}</ul>
            <p class="text-red-400 font-bold mb-6">Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${totalSell.toFixed(2)} G</p>

            <div class="border-t border-yellow-600 mt-5 pt-5">
              <p class="text-yellow-300">â€¢ Ø­Ø§Ù„Ø© Ø§Ù„ÙØ±Ø¹: Ù‡Ø§Ø¯Ø¦ ğŸ–‡ï¸</p>
              <p class="text-yellow-300">â€¢ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„: Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø§Ù„ÙŠØ§</p>
              <p class="text-yellow-300 font-bold mt-3">ğŸ“Œ ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø¢Ù„ÙŠ Ù„Ù†Ø¸Ø§Ù… GoldCrypto ğŸ¤–</p>
              <p class="text-gray-400 mt-3 text-sm">ØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù… âœ…</p>
            </div>

            <div class="mt-6 flex justify-between">
              <button onclick="navigator.clipboard.writeText(document.body.innerText)" class="bg-yellow-500 text-black px-4 py-2 rounded hover:bg-yellow-600">ğŸ“‹ Ù†Ø³Ø® Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
              <button onclick="downloadReport()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">ğŸ’¾ ØªÙ†Ø²ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
            </div>
          </div>

          <script>
            function downloadReport() {
              const blob = new Blob([document.body.innerText], {type: 'text/plain'});
              const url = URL.createObjectURL(blob);
              const a = document.createElement('a');
              a.href = url;
              a.download = 'ØªÙ‚Ø±ÙŠØ±-GoldCrypto-${today}.txt';
              a.click();
              URL.revokeObjectURL(url);
            }
          <\/script>
        </body>
        </html>
      `;

      let win = window.open("", "_blank");
      win.document.write(reportHTML);
      win.document.title = "ØªÙ‚Ø±ÙŠØ± GoldCrypto Ø§Ù„ÙŠÙˆÙ…ÙŠ";
    }

    updateTable();
  </script>

</body>
  </html>
