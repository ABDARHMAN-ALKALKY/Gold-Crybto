<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø§ÙØ¸</title>
<style>
body {font-family: Arial; direction: rtl; background: #f5f5f5; padding: 20px;}
.container {max-width: 950px; margin: auto; background: white; padding: 20px; border-radius: 10px;}
h2 {text-align: center;}
.hidden {display: none;}
input, button, select {margin: 5px; padding: 8px;}
table {width: 100%; border-collapse: collapse; margin-top: 10px;}
td, th {border: 1px solid #ccc; padding: 5px; text-align: center;}
textarea {width: 100%; height: 120px;}
.admin-btn {margin: 5px;}
</style>
</head>
<body>
<div class="container">
  <h2>ğŸ’° Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø§ÙØ¸ Ù„Ù„Ø¹Ù…Ù„Ø§Øª</h2>

  <!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
  <div id="loginDiv">
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>
    <input id="loginName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨"><br>
    <input id="loginCard" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¨Ù†ÙƒÙŠØ©"><br>
    <input id="loginPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±"><br>
    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    <hr>
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
    <input id="adminPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©"><br>
    <button onclick="adminLogin()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
    <hr>
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§</h3>
    <input id="superPass" type="password" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§"><br>
    <button onclick="superLogin()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§</button>
  </div>

  <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ -->
  <div id="userDiv" class="hidden">
    <h3>ğŸ“Š Ø­Ø³Ø§Ø¨Ùƒ</h3>
    <div>Ø±ØµÙŠØ¯Ùƒ:</div>
    <table id="balanceTable">
      <tr><th>Ø§Ù„Ø¹Ù…Ù„Ø©</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th></tr>
    </table>
    <div>Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Øª:</div>
    <table id="priceTable">
      <tr><th>Ø§Ù„Ø¹Ù…Ù„Ø©</th><th>Ø§Ù„Ø³Ø¹Ø± (G)</th></tr>
    </table>
    <h4>Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h4>
    <textarea id="userLog" readonly></textarea><br>
    <button onclick="getUserReport()">Ø·Ù„Ø¨ ØªÙ‚Ø±ÙŠØ±</button>
    <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
  </div>

  <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© -->
  <div id="adminDiv" class="hidden">
    <h3>âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
    <button onclick="showDiv('buySellDiv')">Ø´Ø±Ø§Ø¡ / Ø¨ÙŠØ¹</button>
    <button onclick="showDiv('priceDiv')">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙŠØ¯ÙˆÙŠØ§Ù‹</button>
    <button onclick="showDiv('reportDiv')">Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ</button>
    <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>

    <div id="buySellDiv" class="hidden">
      <h4>Ø´Ø±Ø§Ø¡ / Ø¨ÙŠØ¹</h4>
      <input id="accCode" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ù…Ø­ÙØ¸Ø©"><br>
      <select id="coinSelect">
        <option value="NANO">NANO</option>
        <option value="DASH">DASH</option>
        <option value="BTC">BTC</option>
      </select><br>
      <input id="amount" type="number" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©"><br>
      <select id="typeSelect">
        <option value="buy">Ø´Ø±Ø§Ø¡</option>
        <option value="sell">Ø¨ÙŠØ¹</option>
      </select><br>
      <button onclick="executeOperation()">ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</button>
      <textarea id="operationLog" readonly></textarea>
    </div>

    <div id="priceDiv" class="hidden">
      <h4>ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙŠØ¯ÙˆÙŠØ§Ù‹</h4>
      <div id="manualPrices"></div>
      <button onclick="savePrices()">Ø­ÙØ¸ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</button>
    </div>

    <div id="reportDiv" class="hidden">
      <h4>Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ</h4>
      <textarea id="dailyReport" readonly></textarea>
    </div>
  </div>

  <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ -->
  <div id="superDiv" class="hidden">
    <h3>ğŸ›¡ï¸ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§</h3>
    <input id="searchAcc" placeholder="Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„ÙƒÙˆØ¯">
    <button onclick="searchAccount()">Ø¨Ø­Ø«</button>
    <div id="editAccountDiv"></div>
    <button onclick="generateSuperReport()">ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„</button>
    <button onclick="resetSystem()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ø¸Ø§Ù…</button>
    <textarea id="superReport" readonly></textarea><br>
    <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
  </div>
</div>

<script>
// Ø¨ÙŠØ§Ù†Ø§Øª Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
let users = [
  {name:"Ahmed", card:"A000A", pass:"1234", code:"Z000Z", balance:{NANO:2,DASH:1,BTC:0}, log:[]},
];
let prices = {NANO:1000, DASH:2000, BTC:3000};
let dailyLog = [];
let currentUser = null;

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„
function updateTables(){
  if(currentUser){
    let balTable = document.getElementById("balanceTable");
    balTable.innerHTML = "<tr><th>Ø§Ù„Ø¹Ù…Ù„Ø©</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th></tr>";
    for(let c in currentUser.balance){
      balTable.innerHTML += `<tr><td>${c}</td><td>${currentUser.balance[c]}</td></tr>`;
    }
    let priceTable = document.getElementById("priceTable");
    priceTable.innerHTML = "<tr><th>Ø§Ù„Ø¹Ù…Ù„Ø©</th><th>Ø§Ù„Ø³Ø¹Ø± (G)</th></tr>";
    for(let c in prices){
      priceTable.innerHTML += `<tr><td>${c}</td><td>${prices[c]}</td></tr>`;
    }
    document.getElementById("userLog").value = currentUser.log.join("\n");
  }
}

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
function login(){
  let name=document.getElementById("loginName").value;
  let card=document.getElementById("loginCard").value;
  let pass=document.getElementById("loginPass").value;
  let user=users.find(u=>u.name===name && u.card===card && u.pass===pass);
  if(user){
    currentUser=user;
    showOnly("userDiv");
    updateTables();
  } else alert("Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø§Ø·Ø¦Ø©");
}

function logout(){
  currentUser=null;
  showOnly("loginDiv");
}

function adminLogin(){
  if(document.getElementById("adminPass").value==="ADMIN"){
    showOnly("adminDiv");
    renderManualPrices();
  } else alert("ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©");
}

function superLogin(){
  if(document.getElementById("superPass").value==="TECNO LKL"){
    showOnly("superDiv");
  } else alert("Ø±Ù…Ø² Ø®Ø§Ø·Ø¦");
}

// Ø¥Ø¸Ù‡Ø§Ø± ÙˆØ§Ø¬Ù‡Ø© Ù…Ø­Ø¯Ø¯Ø©
function showOnly(id){
  document.querySelectorAll(".container > div").forEach(div=>div.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

// Ø¥Ø¸Ù‡Ø§Ø± Ø¬Ø²Ø¡ ÙÙŠ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©
function showDiv(id){
  document.querySelectorAll("#adminDiv > div").forEach(div=>div.classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
}

// ØªÙ†ÙÙŠØ° Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ§Ù„Ø¨ÙŠØ¹
function executeOperation(){
  let code=document.getElementById("accCode").value;
  let coin=document.getElementById("coinSelect").value;
  let amount=parseInt(document.getElementById("amount").value);
  let type=document.getElementById("typeSelect").value;
  let user=users.find(u=>u.code===code);
  if(!user || !amount) return alert("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
  let price=prices[coin]*amount;
  if(type==="buy"){
    user.balance[coin]+=amount;
    prices[coin]=Math.round(prices[coin]*1.2); // ÙŠØ²ÙŠØ¯ 20%
    user.log.push(`Ø´Ø±Ø§Ø¡ ${amount} ${coin} Ø¨Ø³Ø¹Ø± ${price}G`);
    dailyLog.push(`Ø´Ø±Ø§Ø¡:${code}-${coin}-${amount}`);
  }else{
    if(user.balance[coin]<amount) return alert("Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙ");
    user.balance[coin]-=amount;
    prices[coin]=Math.round(prices[coin]*0.85); // ÙŠÙ†Ù‚Øµ 15%
    user.log.push(`Ø¨ÙŠØ¹ ${amount} ${coin} Ø¨Ø³Ø¹Ø± ${price}G`);
    dailyLog.push(`Ø¨ÙŠØ¹:${code}-${coin}-${amount}`);
  }
  document.getElementById("operationLog").value=`Ø®ØµÙ… Ù…Ù† Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© ${user.card}\n${price}G\n${type==="buy"?"Ø§Ø´ØªØ±Ù‰":"Ø¨Ø§Ø¹"} ${amount}${coin[0]}\nÙƒÙˆØ¯ Ø§Ù„Ù…Ø­ÙØ¸Ø© ${user.code}`;
  updateTables();
}

// ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„ÙŠØ¯ÙˆÙŠ
function renderManualPrices(){
  let div=document.getElementById("manualPrices");
  div.innerHTML="";
  for(let c in prices){
    div.innerHTML+=`${c}: <input id="price_${c}" value="${prices[c]}"><br>`;
  }
}

function savePrices(){
  for(let c in prices){
    let val=parseInt(document.getElementById(`price_${c}`).value);
    if(!isNaN(val)) prices[c]=val;
  }
  alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø³Ø¹Ø§Ø±");
  updateTables();
}

// ØªÙ‚Ø±ÙŠØ± ÙŠÙˆÙ…ÙŠ
function getUserReport(){
  alert(currentUser.log.join("\n") || "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª");
}

function showDailyReport(){
  document.getElementById("dailyReport").value=dailyLog.join("\n")||"Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…";
}

// Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§
function searchAccount(){
  let val=document.getElementById("searchAcc").value;
  let user=users.find(u=>u.name===val||u.code===val);
  let div=document.getElementById("editAccountDiv");
  if(user){
    div.innerHTML=`<b>${user.name} (${user.code})</b><br>
    NANO:<input id="editN" value="${user.balance.NANO}">
    DASH:<input id="editD" value="${user.balance.DASH}">
    BTC:<input id="editB" value="${user.balance.BTC}">
    <button onclick="saveAccount('${user.code}')">Ø­ÙØ¸</button>`;
  }else div.innerHTML="Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø³Ø§Ø¨";
}

function saveAccount(code){
  let user=users.find(u=>u.code===code);
  user.balance.NANO=parseInt(document.getElementById("editN").value);
  user.balance.DASH=parseInt(document.getElementById("editD").value);
  user.balance.BTC=parseInt(document.getElementById("editB").value);
  alert("ØªÙ… Ø§Ù„Ø­ÙØ¸");
  updateTables();
}

function generateSuperReport(){
  let txt=`Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª: ${users.length}\nØ¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª: ${dailyLog.length}\n`;
  txt+=dailyLog.join("\n");
  document.getElementById("superReport").value=txt;
}

function resetSystem(){
  dailyLog=[];
  alert("ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ");
}

// ØªØºÙŠÙŠØ± ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„Ø£Ø³Ø¹Ø§Ø± ÙƒÙ„ Ø³Ø§Ø¹Ø© (Ù‡Ù†Ø§ Ù„Ù„ØªØ¬Ø±Ø¨Ø© ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©)
setInterval(()=>{
  for(let c in prices){
    let up=Math.random()>0.5;
    prices[c]=Math.round(prices[c]*(up?1.2:0.85));
  }
  updateTables();
},60000);
</script>
</body>
</html>