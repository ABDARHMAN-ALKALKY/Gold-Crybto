<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>نظام المحافظ الرقمية</title>
<style>
    body {
        background-color: #121212;
        color: #fff;
        font-family: "Tahoma", sans-serif;
        text-align: center;
        margin: 0;
        padding: 0;
    }
    header {
        background-color: #1e1e1e;
        padding: 20px;
        font-size: 1.5em;
        font-weight: bold;
        color: #ffd700;
    }
    main {
        padding: 20px;
    }
    .section {
        background-color: #1e1e1e;
        margin: 20px auto;
        padding: 20px;
        border-radius: 10px;
        max-width: 700px;
        box-shadow: 0 0 10px #000;
    }
    h2 {
        color: #ffd700;
    }
    input, button, select {
        margin: 5px;
        padding: 10px;
        border-radius: 5px;
        border: none;
    }
    input, select {
        width: 60%;
    }
    button {
        background-color: #ffd700;
        color: #000;
        cursor: pointer;
        font-weight: bold;
    }
    button:hover {
        background-color: #e6c200;
    }
    .currency-list {
        display: flex;
        justify-content: center;
        gap: 20px;
    }
    .currency {
        background-color: #222;
        padding: 15px;
        border-radius: 10px;
        min-width: 120px;
    }
    .currency h3 {
        margin: 0;
        color: #ffd700;
    }
    .hidden {
        display: none;
    }
</style>
</head>
<body>

<header>💰 نظام المحافظ الرقمية - وضع داكن</header>

<main>

    <!-- عرض الأسعار العامة -->
    <div class="section" id="public-prices">
        <h2>أسعار العملات الحالية</h2>
        <div class="currency-list" id="currency-prices">
            <!-- سيتم تعبئة الأسعار هنا -->
        </div>
    </div>

    <!-- تسجيل الدخول -->
    <div class="section" id="login-section">
        <h2>تسجيل الدخول</h2>
        <input type="text" id="login-username" placeholder="اسم المستخدم"><br>
        <input type="text" id="login-card" placeholder="كود البطاقة البنكية"><br>
        <input type="text" id="login-wallet" placeholder="كود المحفظة"><br>
        <input type="password" id="login-password" placeholder="كلمة السر"><br>
        <button onclick="login()">دخول</button>
    </div>

    <!-- واجهة المستخدم -->
    <div class="section hidden" id="user-dashboard">
        <h2>لوحة المستخدم</h2>
        <p>👤 اسم المستخدم: <span id="ud-name"></span></p>
        <p>💳 كود البطاقة: <span id="ud-card"></span></p>
        <p>💼 كود المحفظة: <span id="ud-wallet"></span></p>
        <h3>أرصدة العملات:</h3>
        <div id="user-balances"></div>
        <h3>السجل:</h3>
        <pre id="user-log"></pre>
    </div>

    <!-- الإدارة العادية -->
    <div class="section hidden" id="admin-dashboard">
        <h2>الإدارة العادية</h2>
        <h3>إضافة محفظة جديدة</h3>
        <input type="text" id="new-username" placeholder="اسم المستخدم"><br>
        <input type="text" id="new-card" placeholder="كود البطاقة البنكية"><br>
        <input type="password" id="new-password" placeholder="كلمة السر"><br>
        <button onclick="createWallet()">إنشاء المحفظة</button>

        <h3>عملية شراء</h3>
        <input type="text" id="buy-wallet" placeholder="كود المحفظة"><br>
        <select id="buy-currency">
            <option value="BTC">بتكوين</option>
            <option value="DASH">داش</option>
            <option value="NANO">نانو</option>
        </select>
        <input type="number" id="buy-amount" placeholder="الكمية"><br>
        <button onclick="buyCurrency()">شراء</button>

        <h3>عملية بيع</h3>
        <input type="text" id="sell-wallet" placeholder="كود المحفظة"><br>
        <select id="sell-currency">
            <option value="BTC">بتكوين</option>
            <option value="DASH">داش</option>
            <option value="NANO">نانو</option>
        </select>
        <input type="number" id="sell-amount" placeholder="الكمية"><br>
        <button onclick="sellCurrency()">بيع</button>
    </div>

    <!-- الإدارة العليا -->
    <div class="section hidden" id="super-admin-dashboard">
        <h2>الإدارة العليا</h2>
        <h3>بحث عن حساب</h3>
        <input type="text" id="search-account" placeholder="اسم المستخدم أو كود المحفظة"><br>
        <button onclick="searchAccount()">بحث</button>
        <pre id="search-result"></pre>

        <h3>تعديل الأسعار يدويًا</h3>
        <div id="manual-prices"></div>
        <button onclick="updatePricesManually()">تحديث الأسعار</button>

        <h3>تقرير شامل</h3>
        <button onclick="generateReport()">عرض التقرير</button>
        <pre id="full-report"></pre>
    </div>

</main>

<script>
/* بيانات النظام */
let currencies = {
    BTC: 1000,
    DASH: 500,
    NANO: 300
};
let users = {};
let transactions = [];
let walletCounter = 0;

/* تحديث الأسعار العامة */
function updateCurrencyDisplay() {
    const container = document.getElementById('currency-prices');
    container.innerHTML = '';
    for (const [cur, price] of Object.entries(currencies)) {
        const div = document.createElement('div');
        div.className = 'currency';
        div.innerHTML = `<h3>${cur}</h3><p>${price} G</p>`;
        container.appendChild(div);
    }
}

/* تسجيل الدخول */
function login() {
    const username = document.getElementById('login-username').value;
    const card = document.getElementById('login-card').value;
    const wallet = document.getElementById('login-wallet').value;
    const pass = document.getElementById('login-password').value;

    if (username === 'Admin' && card === 'XXXX') {
        if (pass === 'TECNO LD7') {
            document.getElementById('login-section').classList.add('hidden');
            document.getElementById('admin-dashboard').classList.remove('hidden');
            return;
        } else if (pass === 'TECNO XXX') {
            document.getElementById('login-section').classList.add('hidden');
            document.getElementById('super-admin-dashboard').classList.remove('hidden');
            updateManualPrices();
            return;
        }
    }

    const user = Object.values(users).find(u => 
        u.username === username && u.card === card && u.wallet === wallet && u.password === pass
    );

    if (user) {
        document.getElementById('login-section').classList.add('hidden');
        document.getElementById('user-dashboard').classList.remove('hidden');
        document.getElementById('ud-name').textContent = user.username;
        document.getElementById('ud-card').textContent = user.card;
        document.getElementById('ud-wallet').textContent = user.wallet;
        updateUserDashboard(user.wallet);
    } else {
        alert('بيانات الدخول غير صحيحة');
    }
}

/* إنشاء محفظة */
function createWallet() {
    const username = document.getElementById('new-username').value;
    const card = document.getElementById('new-card').value;
    const password = document.getElementById('new-password').value;

    walletCounter++;
    const wallet = 'Z' + walletCounter.toString().padStart(3, '0') + 'Z';

    users[wallet] = {
        username,
        card,
        password,
        wallet,
        balances: { BTC: 0, DASH: 0, NANO: 0 },
        log: []
    };

    alert(`تم إنشاء المحفظة: ${wallet}`);
}

/* تحديث واجهة المستخدم */
function updateUserDashboard(wallet) {
    const user = users[wallet];
    const balances = user.balances;
    const div = document.getElementById('user-balances');
    div.innerHTML = '';
    for (const [cur, amt] of Object.entries(balances)) {
        div.innerHTML += `<p>${cur}: ${amt}</p>`;
    }
    document.getElementById('user-log').textContent = user.log.join('\n');
}

/* تحديث الأسعار يدويًا */
function updateManualPrices() {
    const container = document.getElementById('manual-prices');
    container.innerHTML = '';
    for (const [cur, price] of Object.entries(currencies)) {
        container.innerHTML += `<input type="number" id="price-${cur}" value="${price}"> ${cur}<br>`;
    }
}
function updatePricesManually() {
    for (const cur of Object.keys(currencies)) {
        const val = parseFloat(document.getElementById(`price-${cur}`).value);
        if (!isNaN(val)) currencies[cur] = val;
    }
    updateCurrencyDisplay();
    alert('تم تحديث الأسعار يدويًا');
}

/* توليد التقرير */
function generateReport() {
    let report = '📊 تقرير شامل:\n';
    report += `إجمالي الحسابات: ${Object.keys(users).length}\n`;
    report += `إجمالي العمليات: ${transactions.length}\n`;
    report += 'قائمة العمليات:\n';
    report += transactions.join('\n');
    document.getElementById('full-report').textContent = report;
}

/* تحديث الأسعار العامة مبدئيًا */
updateCurrencyDisplay();
</script>
</body>
</html>