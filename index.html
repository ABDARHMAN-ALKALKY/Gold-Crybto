<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GoldCrypto</title>
<style>
    body {font-family: "Cairo", sans-serif; background-color: #0d0d0d; color: gold; text-align:center;}
    h1 {color: #ffd700;}
    .box {margin: 20px auto; padding: 20px; border: 2px solid gold; border-radius: 15px; width: 85%; background: #1a1a1a;}
    button {background: gold; color: black; padding: 10px 20px; margin: 5px; border:none; border-radius:8px; cursor:pointer; font-weight:bold;}
    button:hover {background: #ffcc00;}
    table {width:100%; color: gold; margin-top:15px; border-collapse: collapse;}
    th, td {padding:10px; border-bottom:1px solid gold;}
    input, select {padding:8px; border-radius:5px; border:1px solid gold; margin:5px; width:80%;}
    .hidden {display:none;}
</style>
</head>
<body>

<h1>ğŸ’° Ù‚Ø³Ù… GoldCrypto ğŸ’°</h1>

<!-- Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø³Ø¹Ø§Ø± -->
<div class="box">
    <h2>Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h2>
    <table id="priceTable">
        <tr><th>Ø§Ù„Ø¹Ù…Ù„Ø©</th><th>Ø§Ù„Ø³Ø¹Ø± (G)</th></tr>
    </table>
</div>

<!-- ØªÙ†ÙÙŠØ° Ø¹Ù…Ù„ÙŠØ© Ø´Ø±Ø§Ø¡/Ø¨ÙŠØ¹ -->
<div class="box">
    <h2>ØªÙ†ÙÙŠØ° Ø¹Ù…Ù„ÙŠØ©</h2>
    <select id="coinSelect"></select>
    <br>
    <input type="number" id="quantity" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©">
    <br>
    <input type="text" id="cardCode" placeholder="ÙƒÙˆØ¯ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø²Ø¨ÙˆÙ†">
    <br>
    <button onclick="makeTransaction('buy')">Ø´Ø±Ø§Ø¡</button>
    <button onclick="makeTransaction('sell')">Ø¨ÙŠØ¹</button>
</div>

<!-- Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© -->
<div class="box">
    <h2>Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…</h2>
    <table id="txTable">
        <tr><th>Ø§Ù„Ø¹Ù…Ù„Ø©</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„ÙˆÙ‚Øª</th><th>Ù†Ø³Ø®</th></tr>
    </table>
    <br>
    <button onclick="generateReport()">ğŸ“ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ</button>
</div>

<!-- Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„ÙŠÙˆÙ…ÙŠ -->
<div class="box hidden" id="dailyReport"></div>

<script>
    // Ø§Ù„Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
    const defaultPrices = {
        "Bitcoin (BTC)": 1000,
        "DASH": 250,
        "Tether (USDT)": 100,
        "Monero (XMR)": 600,
        "Nano (NANO)": 120,
        "Litecoin (LTC)": 300
    };

    let prices = JSON.parse(localStorage.getItem("prices")) || {...defaultPrices};
    let transactions = JSON.parse(localStorage.getItem("transactions")) || [];

    function saveData(){
        localStorage.setItem("prices", JSON.stringify(prices));
        localStorage.setItem("transactions", JSON.stringify(transactions));
    }

    function renderPrices(){
        const table = document.getElementById("priceTable");
        const select = document.getElementById("coinSelect");
        table.innerHTML = "<tr><th>Ø§Ù„Ø¹Ù…Ù„Ø©</th><th>Ø§Ù„Ø³Ø¹Ø± (G)</th></tr>";
        select.innerHTML = "";
        for(let coin in prices){
            table.innerHTML += `<tr><td>${coin}</td><td>${prices[coin]}</td></tr>`;
            select.innerHTML += `<option value="${coin}">${coin}</option>`;
        }
    }

    function renderTransactions(){
        const table = document.getElementById("txTable");
        table.innerHTML = "<tr><th>Ø§Ù„Ø¹Ù…Ù„Ø©</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø§Ù„ÙƒÙ…ÙŠØ©</th><th>Ø§Ù„Ø³Ø¹Ø±</th><th>Ø§Ù„ÙˆÙ‚Øª</th><th>Ù†Ø³Ø®</th></tr>";
        const today = new Date().toLocaleDateString('en-CA');
        transactions.filter(t=>t.date===today).forEach((t,i)=>{
            table.innerHTML += `
            <tr>
                <td>${t.coin}</td>
                <td>${t.type==="buy"?"Ø´Ø±Ø§Ø¡":"Ø¨ÙŠØ¹"}</td>
                <td>${t.qty}</td>
                <td>${t.price}</td>
                <td>${t.time}</td>
                <td><button onclick="copyTx(${i})">Ù†Ø³Ø®</button></td>
            </tr>`;
        });
    }

    function makeTransaction(type){
        const coin = document.getElementById("coinSelect").value;
        const qty = parseFloat(document.getElementById("quantity").value);
        const card = document.getElementById("cardCode").value;
        if(!coin || !qty || !card){
            alert("âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
            return;
        }
        // ØªØºÙŠÙŠØ± Ø§Ù„Ø³Ø¹Ø±
        const change = type==="buy"? 50 : -50;
        prices[coin] += change;

        const now = new Date();
        const tx = {
            coin,
            type,
            qty,
            card,
            price: prices[coin],
            date: now.toLocaleDateString('en-CA'),
            time: now.toLocaleTimeString('ar-EG')
        };

        transactions.push(tx);
        saveData();
        renderPrices();
        renderTransactions();
        alert(`âœ… ØªÙ…Øª Ø¹Ù…Ù„ÙŠØ© ${type==="buy"?"Ø´Ø±Ø§Ø¡":"Ø¨ÙŠØ¹"} Ø¹Ù„Ù‰ ${coin}`);
    }

    function copyTx(i){
        const t = transactions[i];
        const text = `Ø¹Ù…Ù„ÙŠØ© ${t.type==="buy"?"Ø´Ø±Ø§Ø¡":"Ø¨ÙŠØ¹"}\nØ§Ù„Ø¹Ù…Ù„Ø©: ${t.coin}\nØ§Ù„ÙƒÙ…ÙŠØ©: ${t.qty}\nØ§Ù„Ø³Ø¹Ø±: ${t.price}\nØ§Ù„ÙˆÙ‚Øª: ${t.time}\nÙƒÙˆØ¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©: ${t.card}`;
        navigator.clipboard.writeText(text);
        alert("ğŸ“‹ ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø¹Ù…Ù„ÙŠØ©");
    }

    function generateReport(){
        const reportDiv = document.getElementById("dailyReport");
        reportDiv.classList.remove("hidden");

        const today = new Date().toLocaleDateString('en-CA');
        const todayTx = transactions.filter(t=>t.date===today);

        const buys = todayTx.filter(t=>t.type==="buy").length;
        const sells = todayTx.filter(t=>t.type==="sell").length;

        reportDiv.innerHTML = `
        <h2>ğŸ“Š ØªÙ‚Ø±ÙŠØ± GoldCrypto Ø§Ù„ÙŠÙˆÙ…ÙŠ</h2>
        <p>Ø§Ù„ØªØ§Ø±ÙŠØ®: ${new Date().toLocaleDateString('ar-EG')}</p>
        <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø´Ø±Ø§Ø¡: ${buys} Ø¹Ù…Ù„ÙŠØ©</p>
        <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¨ÙŠØ¹: ${sells} Ø¹Ù…Ù„ÙŠØ©</p>
        <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª: ${todayTx.length}</p>
        <hr>
        <p>âœï¸ ØªÙ…Øª ÙƒØªØ§Ø¨Ø© Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø¢Ù„ÙŠ</p>
        `;
    }

    renderPrices();
    renderTransactions();
</script>

</body>
</html>
