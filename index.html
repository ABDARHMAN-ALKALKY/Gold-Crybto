<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø§ÙØ¸ ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Øª</title>
<style>
    body {
        background-color: #121212;
        color: #FFD700;
        font-family: Tahoma, sans-serif;
        text-align: center;
    }
    h1,h2,h3 { color: #FFD700; }
    input, button, select {
        padding: 10px;
        margin: 5px;
        border-radius: 5px;
        border: none;
        outline: none;
        font-weight: bold;
    }
    input { width: 200px; }
    button {
        background-color: #FFD700;
        color: #121212;
        cursor: pointer;
    }
    button:hover { background-color: #ffcc00; }
    .hidden { display: none; }
    .section { border: 1px solid #FFD700; padding: 20px; margin: 20px; border-radius: 10px; }
    table { width: 80%; margin: auto; border-collapse: collapse; }
    th, td { border: 1px solid #FFD700; padding: 8px; }
</style>
</head>
<body>

<h1>ğŸ”¹ Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø­Ø§ÙØ¸ ÙˆØ§Ù„Ø¹Ù…Ù„Ø§Øª ğŸ”¹</h1>

<!-- ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
<div id="login-section" class="section">
    <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
    <input id="loginName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"><br>
    <input id="loginBank" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¨Ù†ÙƒÙŠØ©"><br>
    <input id="loginWallet" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ù…Ø­ÙØ¸Ø©"><br>
    <input id="loginPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±"><br>
    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
<div id="user-section" class="section hidden">
    <h2>Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ <span id="userName"></span></h2>
    <p>ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¨Ù†ÙƒÙŠØ©: <span id="userBank"></span></p>
    <p>ÙƒÙˆØ¯ Ø§Ù„Ù…Ø­ÙØ¸Ø©: <span id="userWallet"></span></p>
    <h3>Ø£Ø±ØµØ¯Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Øª</h3>
    <div id="userBalances"></div>
    <h3>Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h3>
    <div id="userHistory"></div>
    <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>

<!-- Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ© -->
<div id="admin-section" class="section hidden">
    <h2>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©</h2>
    <h3>Ø¥Ø¶Ø§ÙØ© Ù…Ø­ÙØ¸Ø©</h3>
    <input id="newName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"><br>
    <input id="newBank" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¨Ù†ÙƒÙŠØ©"><br>
    <input id="newPass" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±"><br>
    <button onclick="createWallet()">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø­ÙØ¸Ø©</button>
    <h3>Ø´Ø±Ø§Ø¡/Ø¨ÙŠØ¹</h3>
    <input id="opUser" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"><br>
    <select id="opType">
        <option value="buy">Ø´Ø±Ø§Ø¡</option>
        <option value="sell">Ø¨ÙŠØ¹</option>
    </select>
    <select id="opCoin">
        <option value="N">Nano</option>
        <option value="D">Dash</option>
        <option value="B">Bitcoin</option>
    </select>
    <input id="opAmount" type="number" placeholder="Ø§Ù„ÙƒÙ…ÙŠØ©"><br>
    <button onclick="doOperation()">ØªÙ†ÙÙŠØ° Ø§Ù„Ø¹Ù…Ù„ÙŠØ©</button>
    <div id="opResult"></div>
    <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>

<!-- Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§ -->
<div id="superadmin-section" class="section hidden">
    <h2>Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¹Ù„ÙŠØ§</h2>
    <h3>Ø¨Ø­Ø« ÙˆØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</h3>
    <input id="searchUser" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
    <button onclick="searchAccount()">Ø¨Ø­Ø«</button>
    <div id="accountInfo"></div>

    <h3>ØªØ¹Ø¯ÙŠÙ„ Ø£Ø³Ø¹Ø§Ø± Ø§Ù„Ø¹Ù…Ù„Ø§Øª ÙŠØ¯ÙˆÙŠØ§</h3>
    <div id="priceEditor"></div>

    <h3>ØªÙ‚Ø±ÙŠØ± Ø´Ø§Ù…Ù„</h3>
    <div id="fullReport"></div>
    <button onclick="generateFullReport()">Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
    <button onclick="resetReport()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button><br><br>

    <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
</div>

<script>
let users = []; 
let transactions = [];
let prices = { N: 1000, D: 5000, B: 20000 };
let report = { buys: 0, sells: 0, accounts: 0 };
let currentUser = null;
let priceInterval = 45*60*1000; // 45 Ø¯Ù‚ÙŠÙ‚Ø©

function login() {
    const name = document.getElementById("loginName").value;
    const bank = document.getElementById("loginBank").value;
    const wallet = document.getElementById("loginWallet").value;
    const pass = document.getElementById("loginPass").value;

    // Ø¥Ø¯Ø§Ø±Ø© Ø¹Ù„ÙŠØ§
    if(pass === "TECNO XXX") {
        document.getElementById("login-section").classList.add("hidden");
        document.getElementById("superadmin-section").classList.remove("hidden");
        updatePriceEditor();
        return;
    }
    // Ø¥Ø¯Ø§Ø±Ø© Ø¹Ø§Ø¯ÙŠØ©
    if(pass === "TECNO LD7") {
        document.getElementById("login-section").classList.add("hidden");
        document.getElementById("admin-section").classList.remove("hidden");
        return;
    }

    // Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ø§Ø¯ÙŠ
    let u = users.find(x=>x.name===name && x.bank===bank && x.wallet===wallet && x.pass===pass);
    if(u) {
        currentUser = u;
        document.getElementById("login-section").classList.add("hidden");
        document.getElementById("user-section").classList.remove("hidden");
        document.getElementById("userName").innerText = u.name;
        document.getElementById("userBank").innerText = u.bank;
        document.getElementById("userWallet").innerText = u.wallet;
        updateUserInfo();
    } else alert("Ø¨ÙŠØ§Ù†Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
}

function logout(){
    document.querySelectorAll(".section").forEach(s=>s.classList.add("hidden"));
    document.getElementById("login-section").classList.remove("hidden");
}

function createWallet() {
    let name=document.getElementById("newName").value;
    let bank=document.getElementById("newBank").value;
    let pass=document.getElementById("newPass").value;
    if(users.find(u=>u.bank===bank)) return alert("Ù‡Ø°Ù‡ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ù…Ø³ØªØ®Ø¯Ù…Ø© Ø¨Ø§Ù„ÙØ¹Ù„!");
    let wallet="Z"+String(users.length).padStart(3,"0")+"Z";
    users.push({name,bank,pass,wallet,balances:{N:0,D:0,B:0},history:[]});
    report.accounts++;
    alert("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø¨ÙƒÙˆØ¯: "+wallet);
}

function doOperation(){
    let name=document.getElementById("opUser").value;
    let u=users.find(x=>x.name===name);
    if(!u) return alert("Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
    let type=document.getElementById("opType").value;
    let coin=document.getElementById("opCoin").value;
    let amt=parseInt(document.getElementById("opAmount").value);
    if(amt<=0) return;
    let price = prices[coin]*amt;
    if(type==="buy"){
        u.balances[coin]+=amt;
        report.buys++;
        transactions.push(`${u.name} Ø§Ø´ØªØ±Ù‰ ${amt}${coin} Ø¨Ø³Ø¹Ø± ${price}`);
    } else {
        if(u.balances[coin]<amt) return alert("Ø±ØµÙŠØ¯ ØºÙŠØ± ÙƒØ§ÙÙŠ");
        u.balances[coin]-=amt;
        report.sells++;
        transactions.push(`${u.name} Ø¨Ø§Ø¹ ${amt}${coin} Ø¨Ø³Ø¹Ø± ${price}`);
    }
    u.history.push(transactions[transactions.length-1]);
    document.getElementById("opResult").innerText=transactions[transactions.length-1];

    // ØªØºÙŠÙŠØ± Ø§Ù„Ø³Ø¹Ø± Ø¨Ø¹Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©
    changePricesAfterOperation();
    updateUserInfo();
}

function updateUserInfo(){
    if(!currentUser) return;
    let bal=currentUser.balances;
    document.getElementById("userBalances").innerHTML=
        `Nano: ${bal.N}<br>Dash: ${bal.D}<br>Bitcoin: ${bal.B}`;
    document.getElementById("userHistory").innerHTML=currentUser.history.slice(-5).join("<br>");
}

function changePricesAfterOperation(){
    for(let c in prices){
        let r=Math.random();
        if(r>0.5) prices[c]*=1.2;
        else prices[c]*=0.85;
        prices[c]=Math.round(prices[c]);
    }
    updatePriceEditor();
}

function updatePriceEditor(){
    document.getElementById("priceEditor").innerHTML=
        Object.entries(prices).map(([k,v])=>
        `${k}: <input value="${v}" onchange="prices['${k}']=parseInt(this.value)">`).join("<br>");
}

function searchAccount(){
    let name=document.getElementById("searchUser").value;
    let u=users.find(x=>x.name===name);
    if(!u) return alert("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø³Ø§Ø¨");
    document.getElementById("accountInfo").innerHTML=
        `Ø§Ù„Ø§Ø³Ù…: ${u.name}<br>Ø§Ù„Ø¨Ù†Ùƒ: ${u.bank}<br>Ø§Ù„Ù…Ø­ÙØ¸Ø©: ${u.wallet}<br>
         Nano:${u.balances.N} Dash:${u.balances.D} Bitcoin:${u.balances.B}<br>
         <button onclick="deleteAccount('${u.name}')">Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨</button>`;
}

function deleteAccount(name){
    users=users.filter(x=>x.name!==name);
    alert("ØªÙ… Ø­Ø°Ù Ø§Ù„Ø­Ø³Ø§Ø¨");
    document.getElementById("accountInfo").innerHTML="";
}

function generateFullReport(){
    document.getElementById("fullReport").innerHTML=
        `Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª: ${report.accounts}<br>
         Ø¹Ø¯Ø¯ Ø§Ù„Ø´Ø±Ø§Ø¡: ${report.buys}<br>
         Ø¹Ø¯Ø¯ Ø§Ù„Ø¨ÙŠØ¹: ${report.sells}<br>
         Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª:<br>${transactions.join("<br>")}`;
}

function resetReport(){
    report={buys:0,sells:0,accounts:users.length};
    transactions=[];
    alert("ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªÙ‚Ø±ÙŠØ±");
}

// ØªØºÙŠÙŠØ± Ø§Ù„Ø£Ø³Ø¹Ø§Ø± ÙƒÙ„ 45 Ø¯Ù‚ÙŠÙ‚Ø©
setInterval(changePricesAfterOperation,priceInterval);

</script>
</body>
</html>